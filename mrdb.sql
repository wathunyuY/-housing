DROP TABLE families;
CREATE TABLE families (FAMILY_ID int(10) unsigned NOT NULL AUTO_INCREMENT, FAMILY_NAME varchar(255), PERS_ID int(10) unsigned NOT NULL, PRIMARY KEY (FAMILY_ID), INDEX FAMILY_fk_PERSON (PERS_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='ครอบครัว';
DROP TABLE family_members;
CREATE TABLE family_members (FAMILY_MEMBER_ID int(10) unsigned NOT NULL AUTO_INCREMENT, FAMILY_ID int(10) unsigned NOT NULL, PERS_ID int(10) unsigned, FAMILY_MEMBER_STATUS varchar(255), IS_STAY tinyint(1), START_DATE datetime, END_DATE datetime, PRIMARY KEY (FAMILY_MEMBER_ID), INDEX FAMILY_MEMBER_fk_PERSON (PERS_ID), INDEX FAMILY_MEMBER_fk_FAMILY (FAMILY_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE family_room_mappings;
CREATE TABLE family_room_mappings (FAMILY_ROOM_MAPPING_ID int(10) unsigned NOT NULL AUTO_INCREMENT, ROOM_ID int(10) unsigned, FAMILY_ID int(10) unsigned, START_DATE datetime, END_DATE datetime, PRIMARY KEY (FAMILY_ROOM_MAPPING_ID), INDEX FAMILY_ROOM_MAPPING_fk_ROOM (ROOM_ID), INDEX FAMILY_ROOM_MAPPING_fk_FAMILY (FAMILY_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE home_rooms;
CREATE TABLE home_rooms (ROOM_ID int(10) unsigned NOT NULL AUTO_INCREMENT, HOME_SECTION_ID int(10) unsigned, ROOM_NAME varchar(255), ROOM_ORDER int(5), ROOM_ADDRESS int(10), ROOM_SUB_ADDRESS int(10), ROOM_SEQ int(5), ROOM_STATUS_ID int(5), OWNER_GROUP_ID int(10), PRIMARY KEY (ROOM_ID), INDEX HOME_ROOM_fk_HOME_SECTION (HOME_SECTION_ID), INDEX HOME_ROOM_fk_ROOM_STATUS (ROOM_STATUS_ID), INDEX HOME_ROOM_fk_OWNER_GROUP (OWNER_GROUP_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE home_sections;
CREATE TABLE home_sections (HOME_SECTION_ID int(10) unsigned NOT NULL AUTO_INCREMENT, HOME_ID int(10) unsigned, HOME_SECTION_NAME varchar(255), HOME_SECTION_ORDER int(5), PRIMARY KEY (HOME_SECTION_ID), INDEX HOME_SECTION_fk_HOME (HOME_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE home_type_tbls;
CREATE TABLE home_type_tbls (HOME_TYPE_ID int(10) NOT NULL AUTO_INCREMENT, HOME_TYPE_NAME varchar(255), HOME_TYPE_DESCR varchar(255), PRIMARY KEY (HOME_TYPE_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE homes;
CREATE TABLE homes (HOME_ID int(10) unsigned NOT NULL AUTO_INCREMENT, HOME_NAME varchar(255), HOME_DESCR varchar(255), HOME_TYPE_ID int(10), OWNER_GROUP_ID int(10), CREATE_DATE datetime, PRIMARY KEY (HOME_ID), INDEX HOME_fk_HOME_TYPE (HOME_TYPE_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE owner_group_tbls;
CREATE TABLE owner_group_tbls (OWNER_GROUP_ID int(10) NOT NULL AUTO_INCREMENT, OWNER_GROUP_NAME varchar(255), OWNER_GROUP_DESCR varchar(255), PRIMARY KEY (OWNER_GROUP_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE person_currents;
CREATE TABLE person_currents (PERS_ID int(10) unsigned NOT NULL, PREFIX text COLLATE utf8_unicode_ci, FIRST_NAME varchar(100) COLLATE utf8_unicode_ci, LAST_NAME varchar(100) COLLATE utf8_unicode_ci, PERS_NICKNAME varchar(100) COLLATE utf8_unicode_ci, FIRST_NAME_EN varchar(100) COLLATE utf8_unicode_ci, LAST_NAME_EN varchar(100) COLLATE utf8_unicode_ci, PERS_NICKNAME_EN varchar(255) COLLATE utf8_unicode_ci, PICTURE_PATH text COLLATE utf8_unicode_ci, PICTURE_PATH_PRIVATE text COLLATE utf8_unicode_ci, GENDER varchar(1) COLLATE utf8_unicode_ci, MAR_STATUS_ID int(10) unsigned, MAR_STATUS_DT date, ER_IMMUNIZATION varchar(45) COLLATE utf8_unicode_ci, ER_IMMUNIZATION_DESCR text COLLATE utf8_unicode_ci, ADDRESS_1_TYPE0 varchar(45) COLLATE utf8_unicode_ci, DISTRICT_ID_TYPE0 int(10) unsigned, AMPHUR_ID_TYPE0 int(10) unsigned, PROVINCE_ID_TYPE0 int(10) unsigned, COUNTRY_ID_TYPE0 int(10) unsigned, ZIPCODE_TYPE0 varchar(5) COLLATE utf8_unicode_ci, ADDRESS_1_TYPE1 varchar(255) COLLATE utf8_unicode_ci, DISTRICT_ID_TYPE1 int(10) unsigned, AMPHUR_ID_TYPE1 int(10) unsigned, PROVINCE_ID_TYPE1 int(10) unsigned, COUNTRY_ID_TYPE1 int(10) unsigned, ZIPCODE_TYPE1 varchar(5) COLLATE utf8_unicode_ci, ADDRESS_1_TYPE2 varchar(255) COLLATE utf8_unicode_ci, DISTRICT_ID_TYPE2 int(10) unsigned, AMPHUR_ID_TYPE2 int(10) unsigned, PROVINCE_ID_TYPE2 int(10) unsigned, COUNTRY_ID_TYPE2 int(10) unsigned, ZIPCODE_TYPE2 varchar(5) COLLATE utf8_unicode_ci, EMAIL_ADDRESS_1 varchar(255) COLLATE utf8_unicode_ci, EMAIL_ADDRESS_2 varchar(255) COLLATE utf8_unicode_ci, PHONE_NBR varchar(10) COLLATE utf8_unicode_ci, PHONE_EXT varchar(10) COLLATE utf8_unicode_ci, MOBILE_NBR_1 varchar(10) COLLATE utf8_unicode_ci, MOBILE_NBR_2 varchar(10) COLLATE utf8_unicode_ci, MOBILE_NBR_3 varchar(10) COLLATE utf8_unicode_ci, MOBILE_NBR_4 varchar(10) COLLATE utf8_unicode_ci, MOBILE_NBR_5 varchar(10) COLLATE utf8_unicode_ci, LINE_ID varchar(255) COLLATE utf8_unicode_ci, LAST_UPD_DTTM datetime, LAST_UPD_OPRID int(10), PRIMARY KEY (PERS_ID), INDEX fk_PERSON_CURRENTS01_idx (MAR_STATUS_ID), INDEX fk_PERSON_CURRENTS_ADDR_PROVINCE1_idx (PROVINCE_ID_TYPE0), INDEX fk_PERSON_CURRENTS_ADDR_PROVINCE2_idx (PROVINCE_ID_TYPE1), INDEX fk_PERSON_CURRENTS_ADDR_PROVINCE3_idx (PROVINCE_ID_TYPE2), INDEX fk_PERSON_CURRENTS_ADDR_DISTRICT1_idx (DISTRICT_ID_TYPE0), INDEX fk_PERSON_CURRENTS_ADDR_DISTRICT2_idx (DISTRICT_ID_TYPE1), INDEX fk_PERSON_CURRENTS_ADDR_DISTRICT3_idx (DISTRICT_ID_TYPE2), INDEX fk_PERSON_CURRENTS_ADDR_AMPHUR1_idx (AMPHUR_ID_TYPE0), INDEX fk_PERSON_CURRENTS_ADDR_AMPHUR2_idx (AMPHUR_ID_TYPE1), INDEX fk_PERSON_CURRENTS_ADDR_AMPHUR3_idx (AMPHUR_ID_TYPE2), INDEX fk_PERSON_CURRENTS_ADDR_COUNTRY1_idx (COUNTRY_ID_TYPE0), INDEX fk_PERSON_CURRENTS_ADDR_COUNTRY2_idx (COUNTRY_ID_TYPE1), INDEX fk_PERSON_CURRENTS_ADDR_COUNTRY3_idx (COUNTRY_ID_TYPE2)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE person_owner_groups;
CREATE TABLE person_owner_groups (PERS_ID int(10) unsigned NOT NULL, OWNER_GROUP_ID int(10) NOT NULL, PRIMARY KEY (PERS_ID, OWNER_GROUP_ID), INDEX PERSON_OWNER_GROUP_fk_OWNER_GROUP (OWNER_GROUP_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE person_type_tbls;
CREATE TABLE person_type_tbls (TYPE_ID int(10) NOT NULL AUTO_INCREMENT, TYPE_NAME varchar(255) NOT NULL, TYPE_DESCR varchar(255), PRIMARY KEY (TYPE_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE persons;
CREATE TABLE persons (PERS_ID int(10) unsigned NOT NULL AUTO_INCREMENT, TYPE_ID int(10) NOT NULL, PRIMARY KEY (PERS_ID), INDEX PERSON_fk_PERSON_TYPE (TYPE_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE room_status_tbls;
CREATE TABLE room_status_tbls (ROOM_STATUS_ID int(5) NOT NULL AUTO_INCREMENT, ROOM_STATUS_NAME varchar(255), ROOM_STATUS_DESCR varchar(255), PRIMARY KEY (ROOM_STATUS_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
ALTER TABLE families ADD CONSTRAINT FAMILY_fk_PERSON FOREIGN KEY (PERS_ID) REFERENCES persons (PERS_ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE family_members ADD CONSTRAINT FAMILY_MEMBER_fk_FAMILY FOREIGN KEY (FAMILY_ID) REFERENCES families (FAMILY_ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE family_members ADD CONSTRAINT FAMILY_MEMBER_fk_PERSON FOREIGN KEY (PERS_ID) REFERENCES persons (PERS_ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE family_room_mappings ADD CONSTRAINT FAMILY_ROOM_MAPPING_fk_FAMILY FOREIGN KEY (FAMILY_ID) REFERENCES families (FAMILY_ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE family_room_mappings ADD CONSTRAINT FAMILY_ROOM_MAPPING_fk_ROOM FOREIGN KEY (ROOM_ID) REFERENCES home_rooms (ROOM_ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE home_rooms ADD CONSTRAINT HOME_ROOM_fk_HOME_SECTION FOREIGN KEY (HOME_SECTION_ID) REFERENCES home_sections (HOME_SECTION_ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE home_rooms ADD CONSTRAINT HOME_ROOM_fk_OWNER_GROUP FOREIGN KEY (OWNER_GROUP_ID) REFERENCES owner_group_tbls (OWNER_GROUP_ID) ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE home_rooms ADD CONSTRAINT HOME_ROOM_fk_ROOM_STATUS FOREIGN KEY (ROOM_STATUS_ID) REFERENCES room_status_tbls (ROOM_STATUS_ID) ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE home_sections ADD CONSTRAINT HOME_SECTION_fk_HOME FOREIGN KEY (HOME_ID) REFERENCES homes (HOME_ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE homes ADD CONSTRAINT HOME_fk_HOME_TYPE FOREIGN KEY (HOME_TYPE_ID) REFERENCES home_type_tbls (HOME_TYPE_ID) ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE person_currents ADD CONSTRAINT PERSON_CURRENTS_fk_PERSONS FOREIGN KEY (PERS_ID) REFERENCES persons (PERS_ID) ON DELETE CASCADE;
ALTER TABLE person_owner_groups ADD CONSTRAINT PERSON_OWNER_GROUP_fk_OWNER_GROUP FOREIGN KEY (OWNER_GROUP_ID) REFERENCES owner_group_tbls (OWNER_GROUP_ID) ;
ALTER TABLE person_owner_groups ADD CONSTRAINT PERSON_OWNER_GROUP_fk_PERSON FOREIGN KEY (PERS_ID) REFERENCES persons (PERS_ID) ON DELETE CASCADE;
ALTER TABLE persons ADD CONSTRAINT PERSON_fk_PERSON_TYPE FOREIGN KEY (TYPE_ID) REFERENCES person_type_tbls (TYPE_ID);
